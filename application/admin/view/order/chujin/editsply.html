<!--
 * @Description: 
 * @Version: 1.0
 * @Autor: Xyh
 * @Date: 2025-09-07 10:57:28
-->
<form id="edit-form" class="form-horizontal" role="form" data-toggle="validator" method="POST" action="">

    <input type="hidden" id="fee" name="fee" value="{$supply_fee}">
    <input type="hidden" id="access_key" name="row[access_key]" value="{$supply_info.access_key}">
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">提现金额:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-withdrawAmount" class="form-control" name="row[withdrawAmount]" value="{$row.withdrawAmount|htmlentities}" type="text">
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">币种:</label>
        <div class="col-xs-12 col-sm-8">
            <select name="row[withdrawCurrency]" id="bi_tiype"  class="form-control" >
                <option value="USDT">USDT</option>
            </select>
        </div>
    </div>  
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">账户余额:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-account" class="form-control" readonly value="{$supply_info.usdt}" name="account" type="text">
        </div>
    </div>    
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">汇率:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-huilv" class="form-control" readonly name="row[huilv]" value="{$row.huilv|htmlentities}" value="7.13" type="text">
        </div>
    </div>  
    
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">提现数量:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-usdt" class="form-control" name="row[usdt]" value="{$row.usdt|htmlentities}" type="text">
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">手续费:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-supply_fee" readonly class="form-control" name="row[supply_fee]" value="{$row.supply_fee|htmlentities}"  type="text">
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">结算数量:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-supply_usdt" readonly class="form-control" name="row[supply_usdt]" value="{$row.supply_usdt|htmlentities}" type="text">
        </div>
    </div>    


    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">收款人姓名:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-realName" class="form-control" name="row[realName]" value="{$row.realName|htmlentities}" type="text">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Bankname')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-bankName" class="form-control" name="row[bankName]" value="{$row.bankName|htmlentities}" type="text">
        </div>
    </div>    
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Cardnumber')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-cardNumber" class="form-control" name="row[cardNumber]" value="{$row.cardNumber|htmlentities}" type="text">
        </div>
    </div>
    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('Bankbranchname')}:</label>
        <div class="col-xs-12 col-sm-8">
            <input id="c-bankBranchName" class="form-control" name="row[bankBranchName]" value="{$row.bankBranchName|htmlentities}" type="text">
        </div>
    </div>

    <div class="form-group">
        <label class="control-label col-xs-12 col-sm-2">{:__('PayStatus')}:</label>
        <div class="col-xs-12 col-sm-8">

            <div class="radio">

{foreach name="paystatusList" item="vo"}
<label for="row[pay_status]-{$key}">
    <input id="row[pay_status]-{$key}" 
           name="row[pay_status]" 
           type="radio" 
           value="{$key}" 
           {if condition="in_array($key, [1,2,3,5,6]) OR $row['pay_status'] == 5 OR $row['pay_status']> $key"} disabled {/if} 
           {if condition="in_array($key, explode(',', $row['pay_status']))"}checked{/if} />{$vo}
</label>
{/foreach}

<!-- <label for="row[pay_status]-0"><input id="row[pay_status]-0" name="row[pay_status]"
                        type="radio" value="0"  {in name="key" value="$row.pay_status" }checked{/in} /></label> -->

            </div>

        </div>
    </div>
    <div class="form-group layer-footer">
        <label class="control-label col-xs-12 col-sm-2"></label>
        <div class="col-xs-12 col-sm-8">
            <button type="submit" class="btn btn-primary btn-embossed disabled">{:__('OK')}</button>
        </div>
    </div>
</form>


<script>
    var money = document.getElementById('c-withdrawAmount');
    var huilv = document.getElementById('c-huilv');
    var usdt = document.getElementById('c-usdt');
    var supply_fee = document.getElementById('fee').value;

    money.addEventListener('blur', function() {
        var usdt = (money.value / huilv.value ).toFixed(4)
        var fee = (usdt * supply_fee).toFixed(4);
        var supply_usdt = parseFloat(usdt) + parseFloat(fee);

        document.getElementById('c-usdt').value = usdt;
        document.getElementById('c-supply_fee').value = fee;
        document.getElementById('c-supply_usdt').value = supply_usdt;
    });

    usdt.addEventListener('blur', function() {
        var amount = (usdt.value * huilv.value).toFixed(2)
        var fee = (usdt.value * supply_fee).toFixed(4);
        var supply_usdt = parseFloat(usdt.value) + parseFloat(fee);

        document.getElementById('c-withdrawAmount').value = amount;
        document.getElementById('c-supply_fee').value = fee;
        document.getElementById('c-supply_usdt').value =supply_usdt;
    });

</script>