(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-payment-payment"],{"4de0":function(t,a,e){"use strict";e.r(a);var i=e("6391"),n=e.n(i);for(var s in i)["default"].indexOf(s)<0&&function(t){e.d(a,t,(function(){return i[t]}))}(s);a["default"]=n.a},6391:function(t,a,e){"use strict";e("6a54");var i=e("f5bd").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=i(e("2634")),s=i(e("9b1b")),u=i(e("2fdc"));e("bf0f"),e("2797"),e("aa9c"),e("c223"),e("fd3c"),e("dd2b");var o={data:function(){return{show:!1,details:{user_id:0,realName:"",usdt:"",user_usdt:"",pay_type:1,bank_account:"",bank_name:"",bank_zhihang:"",pay_account:"",pay_ewm_image:"",rate:"",withdrawAmount:0,ctime:"",pay_ewm_image_arr:[],authtoken:""},pay_status:"",orderid:"",pay_ewm:[],pay_ewm_txt:"",userInfo:{},biData:{},pay_sub:!1,upThumb:!1}},onLoad:function(t){this.userInfo=uni.getStorageSync("user")||{},this.orderid=t.orderid,this.detail(),this.getBiLst()},methods:{previewImage:function(t){var a=this.details.pay_ewm_image_arr;uni.previewImage({current:1,urls:a})},getBiLst:function(){var t=this;uni.$u.http.post("/api/index/getBiLst",{id:this.id}).then((function(a){1==a.code?a.data.forEach((function(a){1==a.default&&(t.biData=a)})):uni.$u.toast(a.msg)})).catch((function(t){console.log(t)}))},copy:function(t){uni.setClipboardData({data:t,success:function(){uni.$u.toast("已复制")}})},open:function(){},close:function(){this.show=!1},addOrder:function(){var t=this;this.pay_sub||uni.showModal({title:"确认抢单！",icon:"none",duration:1e3,showCancel:!0,cancelText:"取消",cancelColor:"#999",confirmText:"确定",confirmColor:"#007AFF",success:function(a){a.confirm&&(t.pay_sub=!0,uni.$u.http.post("/api/chujin/addCash",{orderid:t.orderid,auth_token:t.details.authtoken}).then((function(a){1==a.code?(t.pay_sub=!1,t.detail()):uni.$u.toast(a.msg)})).catch((function(t){console.log(t)})))}})},detail:function(){var t=this;uni.$u.http.post("/api/chujin/detail",{orderid:this.orderid}).then((function(a){if(1==a.code){var e=a.data;t.pay_status=e.pay_status,t.details={user_id:e.user_id,realName:e.realName,pay_type:e.pay_type,bank_account:e.cardNumber,bank_name:e.bankName,bank_zhihang:e.bankBranchName,user_usdt:e.user_usdt,usdt:e.usdt,huilv:e.huilv,withdrawAmount:e.withdrawAmount,pay_ewm_image:e.pay_ewm_image,pay_ewm_image_arr:e.pay_ewm_image_arr,ctime:e.ctime,authtoken:e.authtoken},e.pinzheng_image&&t.pay_ewm.push(e.pinzheng_image)}})).catch((function(t){}))},afterRead:function(t){var a=this;return(0,u.default)((0,n.default)().mark((function e(){var i,u,o,c,r;return(0,n.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.upThumb=!1,i=[].concat(t.file),u=a.pay_ewm.length,i.map((function(t){a.pay_ewm.push((0,s.default)((0,s.default)({},t),{},{status:"uploading",message:"上传中"}))})),o=0;case 5:if(!(o<i.length)){e.next=16;break}return e.next=8,a.uploadFilePromise(i[o].url);case 8:c=e.sent,r=a.pay_ewm[u],a.pay_ewm.splice(u,1,Object.assign(r,{status:"success",message:"",url:c})),u++,a.upThumb=!0;case 13:o++,e.next=5;break;case 16:case"end":return e.stop()}}),e)})))()},uploadFilePromise:function(t){return new Promise((function(a,e){uni.$u.http.upload("/api/common/upload",{filePath:t,name:"file"}).then((function(t){setTimeout((function(){a(t.data.fullurl)}),1e3)}))}))},deletePic:function(t){this[t.name].splice(t.index,1),this.pay_ewm_txt=""},updatePayImg:function(){var t=this;if(this.upThumb)if(0!=t.pay_ewm.length){for(var a=[],e=0;e<t.pay_ewm.length;e++)a[e]=t.pay_ewm[e].url;var i=a.toString();t.pay_sub=!0;var n={orderid:this.orderid,pinzheng_image:i,auth_token:t.details.authtoken};uni.$u.http.post("/api/chujin/uploadPzImg",n).then((function(a){1==a.code?(t.detail(),uni.$u.toast(a.msg),t.close()):uni.$u.toast(a.msg)})).catch((function(t){console.log(t)}))}else uni.$u.toast("请上传图片");else uni.$u.toast("请上传图片")}}};a.default=o},"9b84":function(t,a,e){"use strict";e.r(a);var i=e("c913"),n=e("4de0");for(var s in n)["default"].indexOf(s)<0&&function(t){e.d(a,t,(function(){return n[t]}))}(s);e("b08c");var u=e("828b"),o=Object(u["a"])(n["default"],i["b"],i["c"],!1,null,"1ede9a7d",null,!1,i["a"],void 0);a["default"]=o.exports},a283:function(t,a,e){var i=e("c86c");a=i(!1),a.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.page[data-v-1ede9a7d]{padding:%?20?%}.payinfo[data-v-1ede9a7d]{padding:%?30?%;background-color:#fff;border-radius:%?10?%;margin-bottom:%?30?%}.payinfo .flex[data-v-1ede9a7d]{display:flex;align-items:center;padding:%?20?% 0;margin-bottom:%?30?%}.payinfo .flex .copy[data-v-1ede9a7d]{margin-left:auto}.payinfo .tips[data-v-1ede9a7d]{font-size:14px;color:#f56c6c}.pay_ewm_img[data-v-1ede9a7d]{width:%?230?%;height:%?230?%}.popArea[data-v-1ede9a7d]{padding-top:%?50?%}.popArea .pop_head[data-v-1ede9a7d]{padding:0 %?20?%;text-align:center;font-size:%?32?%}.popArea .upload[data-v-1ede9a7d]{padding:%?10?% %?20?%}',""]),t.exports=a},b08c:function(t,a,e){"use strict";var i=e("d6f9"),n=e.n(i);n.a},c913:function(t,a,e){"use strict";e.d(a,"b",(function(){return n})),e.d(a,"c",(function(){return s})),e.d(a,"a",(function(){return i}));var i={uButton:e("948f").default,uPopup:e("476d").default,uUpload:e("bc4e").default},n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("v-uni-view",{staticClass:"page"},[e("v-uni-view",{staticClass:"payinfo"},[e("v-uni-view",{staticClass:"u-info"},[t._v("发起者")]),e("v-uni-view",{staticClass:"flex u-border-bottom"},[e("v-uni-view",[t._v(t._s(t.details.realName))]),e("v-uni-view",{staticClass:"copy"},[e("u-button",{attrs:{type:"primary",size:"mini",plain:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.copy(t.details.realName)}}},[t._v("复制")])],1)],1),e("v-uni-view",{staticClass:"u-info"},[t._v("订单ID")]),e("v-uni-view",{staticClass:"flex u-border-bottom"},[e("v-uni-view",[t._v(t._s(t.orderid))]),e("v-uni-view",{staticClass:"copy"},[e("u-button",{attrs:{type:"primary",size:"mini",plain:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.copy(t.orderid)}}},[t._v("复制")])],1)],1),e("v-uni-view",{staticClass:"u-info"},[t._v("实际订单数量")]),e("v-uni-view",{staticClass:"flex u-border-bottom"},[e("v-uni-view",[t._v(t._s(t.details.user_usdt))]),e("v-uni-view",{staticClass:"copy"},[e("u-button",{attrs:{type:"primary",size:"mini",plain:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.copy(t.details.user_usdt)}}},[t._v("复制")])],1)],1),e("v-uni-view",{staticClass:"u-info"},[t._v("应支付")]),e("v-uni-view",{staticClass:"flex u-border-bottom"},[e("v-uni-view",[t._v(t._s(t.details.withdrawAmount))]),e("v-uni-view",{staticClass:"copy"},[e("u-button",{attrs:{type:"primary",size:"mini",plain:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.copy(t.details.withdrawAmount)}}},[t._v("复制")])],1)],1),"bank"==t.details.pay_type?[e("v-uni-view",{staticClass:"u-info"},[t._v("付款账户")]),e("v-uni-view",{staticClass:"flex u-border-bottom"},[e("v-uni-view",[t._v(t._s(t.details.bank_account))]),e("v-uni-view",{staticClass:"copy"},[e("u-button",{attrs:{type:"primary",size:"mini",plain:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.copy(t.details.bank_account)}}},[t._v("复制")])],1)],1),e("v-uni-view",{staticClass:"u-info"},[t._v("付款银行")]),e("v-uni-view",{staticClass:"flex u-border-bottom"},[e("v-uni-view",[t._v(t._s(t.details.bank_name))]),e("v-uni-view",{staticClass:"copy"},[e("u-button",{attrs:{type:"primary",size:"mini",plain:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.copy(t.details.bank_name)}}},[t._v("复制")])],1)],1),e("v-uni-view",{staticClass:"u-info"},[t._v("支行名称")]),e("v-uni-view",{staticClass:"flex u-border-bottom"},[e("v-uni-view",[t._v(t._s(t.details.bank_zhihang))]),e("v-uni-view",{staticClass:"copy"},[e("u-button",{attrs:{type:"primary",size:"mini",plain:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.copy(t.details.bank_zhihang)}}},[t._v("复制")])],1)],1)]:[e("v-uni-view",{staticClass:"u-info"},[t._v("付款账户")]),e("v-uni-view",{staticClass:"flex u-border-bottom"},[e("v-uni-view",[t._v(t._s(t.details.pay_account))]),e("v-uni-view",{staticClass:"copy"},[e("u-button",{attrs:{type:"primary",size:"mini",plain:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.copy(t.details.pay_account)}}},[t._v("复制")])],1)],1),e("v-uni-view",{staticClass:"u-info"},[t._v("付款类型")]),e("v-uni-view",{staticClass:"flex u-border-bottom"},[e("v-uni-view",["bank"==t.details.pay_type?[t._v("银行卡")]:t._e(),"alipay"==t.details.pay_type?[t._v("支付宝")]:t._e(),"wxpay"==t.details.pay_type?[t._v("微信")]:t._e()],2)],1)],t.details.pay_ewm_image_arr.length>0?[e("v-uni-view",{staticClass:"u-info"},[t._v("付款凭证")]),e("v-uni-view",{staticClass:"flex u-border-bottom"},[e("v-uni-view",t._l(t.details.pay_ewm_image_arr,(function(a,i){return e("v-uni-image",{key:i,staticClass:"pay_ewm_img",attrs:{src:a},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.previewImage(i)}}})})),1)],1)]:t._e(),t.details.ctime?[e("v-uni-view",{staticClass:"u-info"},[t._v("发起时间")]),e("v-uni-view",{staticClass:"flex u-border-bottom"},[e("v-uni-view",[t._v(t._s(t.details.ctime))])],1)]:t._e(),e("v-uni-view",{staticClass:"tips"},[e("v-uni-view",[t._v("【禁止备注】禁止备注任何敏感字样")]),e("v-uni-view",[t._v("【禁止他人代付】付款人必须是交易账户持有人")])],1)],2),t.pay_status<=1?[e("u-button",{attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.addOrder()}}},[t._v("立即抢单")])]:[t.userInfo.id!=t.details.user_id?[e("u-button",{attrs:{type:"primary",disabled:!0}},[t._v("已被抢单")])]:[2==t.pay_status?[e("u-button",{attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.show=!0}}},[t._v("立即付款")])]:t._e(),3==t.pay_status?[e("u-button",{attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.show=!0}}},[t._v("已支付，待审核")])]:t._e(),4==t.pay_status?[e("u-button",{attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.show=!0}}},[t._v("商户已审核")])]:t._e(),5==t.pay_status?[e("u-button",{attrs:{type:"primary"}},[t._v("已完成")])]:t._e(),6==t.pay_status?[e("u-button",{attrs:{type:"primary",disabled:!0}},[t._v("取消")])]:t._e()]],e("u-popup",{attrs:{show:t.show},on:{close:function(a){arguments[0]=a=t.$handleEvent(a),t.close.apply(void 0,arguments)},open:function(a){arguments[0]=a=t.$handleEvent(a),t.open.apply(void 0,arguments)}}},[e("v-uni-view",{staticClass:"popArea"},[e("v-uni-view",{staticClass:"upload"},[e("u-upload",{attrs:{fileList:t.pay_ewm,previewImage:!0,previewFullImage:!0,maxCount:3,name:"pay_ewm",width:"100",height:"100",uploadText:"点击上传支付凭证"},on:{afterRead:function(a){arguments[0]=a=t.$handleEvent(a),t.afterRead.apply(void 0,arguments)},delete:function(a){arguments[0]=a=t.$handleEvent(a),t.deletePic.apply(void 0,arguments)}}})],1),e("v-uni-view",{staticClass:"btn"},[e("u-button",{attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.updatePayImg()}}},[t._v("立即上传")])],1)],1)],1)],2)},s=[]},d6f9:function(t,a,e){var i=e("a283");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=e("967d").default;n("95d45c4a",i,!0,{sourceMap:!1,shadowMode:!1})}}]);