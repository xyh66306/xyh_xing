(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-payment-payment"],{"10d2":function(t,a,i){"use strict";i.r(a);var e=i("3505"),n=i.n(e);for(var s in e)["default"].indexOf(s)<0&&function(t){i.d(a,t,(function(){return e[t]}))}(s);a["default"]=n.a},"24b6":function(t,a,i){"use strict";var e=i("f6f7"),n=i.n(e);n.a},3505:function(t,a,i){"use strict";i("6a54");var e=i("f5bd").default;Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var n=e(i("2634")),s=e(i("9b1b")),u=e(i("2fdc"));i("bf0f"),i("2797"),i("aa9c"),i("c223"),i("fd3c"),i("dd2b");var o={data:function(){return{show:!1,details:{user_id:0,realName:"",usdt:"",user_usdt:"",pay_type:1,bank_account:"",bank_name:"",bank_zhihang:"",pay_account:"",pay_ewm_image:"",rate:"",withdrawAmount:0,ctime:"",pay_ewm_image_arr:[],authtoken:""},pay_status:"",orderid:"",pay_ewm:[],pay_ewm_txt:"",userInfo:{},biData:{},pay_sub:!1,upThumb:!1}},onLoad:function(t){this.userInfo=uni.getStorageSync("user")||{},this.orderid=t.orderid,this.detail(),this.getBiLst()},methods:{previewImage:function(t){var a=this.details.pay_ewm_image_arr;uni.previewImage({current:1,urls:a})},getBiLst:function(){var t=this;uni.$u.http.post("/api/index/getBiLst",{id:this.id}).then((function(a){1==a.code?a.data.forEach((function(a){1==a.default&&(t.biData=a)})):uni.$u.toast(a.msg)})).catch((function(t){console.log(t)}))},copy:function(t){uni.setClipboardData({data:t,success:function(){uni.$u.toast("已复制")}})},open:function(){},close:function(){this.show=!1},addOrder:function(){var t=this;this.pay_sub||uni.showModal({title:"确认抢单！",icon:"none",duration:1e3,showCancel:!0,cancelText:"取消",cancelColor:"#999",confirmText:"确定",confirmColor:"#007AFF",success:function(a){a.confirm&&(t.pay_sub=!0,uni.$u.http.post("/api/chujin/addCash",{orderid:t.orderid,auth_token:t.details.authtoken}).then((function(a){1==a.code?(t.pay_sub=!1,t.detail()):uni.$u.toast(a.msg)})).catch((function(t){console.log(t)})))}})},detail:function(){var t=this;uni.$u.http.post("/api/chujin/detail",{orderid:this.orderid}).then((function(a){if(1==a.code){var i=a.data;t.pay_status=i.pay_status,t.details={user_id:i.user_id,realName:i.realName,pay_type:i.pay_type,bank_account:i.cardNumber,bank_name:i.bankName,bank_zhihang:i.bankBranchName,user_usdt:i.user_usdt,usdt:i.usdt,huilv:i.huilv,withdrawAmount:i.withdrawAmount,pay_ewm_image:i.pay_ewm_image,pay_ewm_image_arr:i.pay_ewm_image_arr,ctime:i.ctime,authtoken:i.authtoken},i.pinzheng_image&&t.pay_ewm.push(i.pinzheng_image)}})).catch((function(t){}))},afterRead:function(t){var a=this;return(0,u.default)((0,n.default)().mark((function i(){var e,u,o,c,r;return(0,n.default)().wrap((function(i){while(1)switch(i.prev=i.next){case 0:a.upThumb=!1,e=[].concat(t.file),u=a.pay_ewm.length,e.map((function(t){a.pay_ewm.push((0,s.default)((0,s.default)({},t),{},{status:"uploading",message:"上传中"}))})),o=0;case 5:if(!(o<e.length)){i.next=16;break}return i.next=8,a.uploadFilePromise(e[o].url);case 8:c=i.sent,r=a.pay_ewm[u],a.pay_ewm.splice(u,1,Object.assign(r,{status:"success",message:"",url:c})),u++,a.upThumb=!0;case 13:o++,i.next=5;break;case 16:case"end":return i.stop()}}),i)})))()},uploadFilePromise:function(t){return new Promise((function(a,i){uni.$u.http.upload("/api/common/upload",{filePath:t,name:"file"}).then((function(t){setTimeout((function(){a(t.data.fullurl)}),1e3)}))}))},deletePic:function(t){this[t.name].splice(t.index,1),this.pay_ewm_txt=""},updatePayImg:function(){var t=this;if(this.upThumb)if(0!=t.pay_ewm.length){for(var a=[],i=0;i<t.pay_ewm.length;i++)a[i]=t.pay_ewm[i].url;var e=a.toString();t.pay_sub=!0;var n={orderid:this.orderid,pinzheng_image:e,auth_token:t.details.authtoken};uni.$u.http.post("/api/chujin/uploadPzImg",n).then((function(a){1==a.code?(t.detail(),uni.$u.toast(a.msg),t.close()):uni.$u.toast(a.msg)})).catch((function(t){console.log(t)}))}else uni.$u.toast("请上传图片");else uni.$u.toast("请上传图片")}}};a.default=o},"68bd":function(t,a,i){"use strict";i.d(a,"b",(function(){return n})),i.d(a,"c",(function(){return s})),i.d(a,"a",(function(){return e}));var e={uButton:i("d36b").default,uPopup:i("799a").default,uUpload:i("99cb").default},n=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("v-uni-view",{staticClass:"page"},[i("v-uni-view",{staticClass:"payinfo"},[i("v-uni-view",{staticClass:"u-info"},[t._v("发起者")]),i("v-uni-view",{staticClass:"flex u-border-bottom"},[i("v-uni-view",[t._v(t._s(t.details.realName))]),i("v-uni-view",{staticClass:"copy"},[i("u-button",{attrs:{type:"primary",size:"mini",plain:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.copy(t.details.realName)}}},[t._v("复制")])],1)],1),i("v-uni-view",{staticClass:"u-info"},[t._v("订单ID")]),i("v-uni-view",{staticClass:"flex u-border-bottom"},[i("v-uni-view",[t._v(t._s(t.orderid))]),i("v-uni-view",{staticClass:"copy"},[i("u-button",{attrs:{type:"primary",size:"mini",plain:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.copy(t.orderid)}}},[t._v("复制")])],1)],1),i("v-uni-view",{staticClass:"u-info"},[t._v("实际订单数量")]),i("v-uni-view",{staticClass:"flex u-border-bottom"},[i("v-uni-view",[t._v(t._s(t.details.user_usdt))]),i("v-uni-view",{staticClass:"copy"},[i("u-button",{attrs:{type:"primary",size:"mini",plain:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.copy(t.details.user_usdt)}}},[t._v("复制")])],1)],1),i("v-uni-view",{staticClass:"u-info"},[t._v("应支付")]),i("v-uni-view",{staticClass:"flex u-border-bottom"},[i("v-uni-view",[t._v(t._s(t.details.withdrawAmount))]),i("v-uni-view",{staticClass:"copy"},[i("u-button",{attrs:{type:"primary",size:"mini",plain:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.copy(t.details.withdrawAmount)}}},[t._v("复制")])],1)],1),i("v-uni-view",{staticClass:"u-info"},[t._v("汇率")]),i("v-uni-view",{staticClass:"flex u-border-bottom"},[i("v-uni-view",[t._v(t._s(t.biData.duichu||"7.20"))])],1),"bank"==t.details.pay_type?[i("v-uni-view",{staticClass:"u-info"},[t._v("付款账户")]),i("v-uni-view",{staticClass:"flex u-border-bottom"},[i("v-uni-view",[t._v(t._s(t.details.bank_account))]),i("v-uni-view",{staticClass:"copy"},[i("u-button",{attrs:{type:"primary",size:"mini",plain:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.copy(t.details.bank_account)}}},[t._v("复制")])],1)],1),i("v-uni-view",{staticClass:"u-info"},[t._v("付款银行")]),i("v-uni-view",{staticClass:"flex u-border-bottom"},[i("v-uni-view",[t._v(t._s(t.details.bank_name))]),i("v-uni-view",{staticClass:"copy"},[i("u-button",{attrs:{type:"primary",size:"mini",plain:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.copy(t.details.bank_name)}}},[t._v("复制")])],1)],1),i("v-uni-view",{staticClass:"u-info"},[t._v("支行名称")]),i("v-uni-view",{staticClass:"flex u-border-bottom"},[i("v-uni-view",[t._v(t._s(t.details.bank_zhihang))]),i("v-uni-view",{staticClass:"copy"},[i("u-button",{attrs:{type:"primary",size:"mini",plain:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.copy(t.details.bank_zhihang)}}},[t._v("复制")])],1)],1)]:[i("v-uni-view",{staticClass:"u-info"},[t._v("付款账户")]),i("v-uni-view",{staticClass:"flex u-border-bottom"},[i("v-uni-view",[t._v(t._s(t.details.pay_account))]),i("v-uni-view",{staticClass:"copy"},[i("u-button",{attrs:{type:"primary",size:"mini",plain:!0},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.copy(t.details.pay_account)}}},[t._v("复制")])],1)],1),i("v-uni-view",{staticClass:"u-info"},[t._v("付款类型")]),i("v-uni-view",{staticClass:"flex u-border-bottom"},[i("v-uni-view",["bank"==t.details.pay_type?[t._v("银行卡")]:t._e(),"alipay"==t.details.pay_type?[t._v("支付宝")]:t._e(),"wxpay"==t.details.pay_type?[t._v("微信")]:t._e()],2)],1)],t.details.pay_ewm_image_arr.length>0?[i("v-uni-view",{staticClass:"u-info"},[t._v("付款凭证")]),i("v-uni-view",{staticClass:"flex u-border-bottom"},[i("v-uni-view",t._l(t.details.pay_ewm_image_arr,(function(a,e){return i("v-uni-image",{key:e,staticClass:"pay_ewm_img",attrs:{src:a},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.previewImage(e)}}})})),1)],1)]:t._e(),t.details.ctime?[i("v-uni-view",{staticClass:"u-info"},[t._v("发起时间")]),i("v-uni-view",{staticClass:"flex u-border-bottom"},[i("v-uni-view",[t._v(t._s(t.details.ctime))])],1)]:t._e(),i("v-uni-view",{staticClass:"tips"},[i("v-uni-view",[t._v("【禁止备注】禁止备注任何敏感字样")]),i("v-uni-view",[t._v("【禁止他人代付】付款人必须是交易账户持有人")])],1)],2),t.pay_status<=1?[i("u-button",{attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.addOrder()}}},[t._v("立即抢单")])]:[t.userInfo.id!=t.details.user_id?[i("u-button",{attrs:{type:"primary",disabled:!0}},[t._v("已被抢单")])]:[2==t.pay_status?[i("u-button",{attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.show=!0}}},[t._v("立即付款")])]:t._e(),3==t.pay_status?[i("u-button",{attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.show=!0}}},[t._v("已支付，待审核")])]:t._e(),4==t.pay_status?[i("u-button",{attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.show=!0}}},[t._v("商户已审核")])]:t._e(),5==t.pay_status?[i("u-button",{attrs:{type:"primary"}},[t._v("已完成")])]:t._e(),6==t.pay_status?[i("u-button",{attrs:{type:"primary",disabled:!0}},[t._v("取消")])]:t._e()]],i("u-popup",{attrs:{show:t.show},on:{close:function(a){arguments[0]=a=t.$handleEvent(a),t.close.apply(void 0,arguments)},open:function(a){arguments[0]=a=t.$handleEvent(a),t.open.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"popArea"},[i("v-uni-view",{staticClass:"upload"},[i("u-upload",{attrs:{fileList:t.pay_ewm,previewImage:!0,previewFullImage:!0,maxCount:3,name:"pay_ewm",width:"100",height:"100",uploadText:"点击上传支付凭证"},on:{afterRead:function(a){arguments[0]=a=t.$handleEvent(a),t.afterRead.apply(void 0,arguments)},delete:function(a){arguments[0]=a=t.$handleEvent(a),t.deletePic.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"btn"},[i("u-button",{attrs:{type:"primary"},on:{click:function(a){arguments[0]=a=t.$handleEvent(a),t.updatePayImg()}}},[t._v("立即上传")])],1)],1)],1)],2)},s=[]},"732b":function(t,a,i){"use strict";i.r(a);var e=i("68bd"),n=i("10d2");for(var s in n)["default"].indexOf(s)<0&&function(t){i.d(a,t,(function(){return n[t]}))}(s);i("24b6");var u=i("828b"),o=Object(u["a"])(n["default"],e["b"],e["c"],!1,null,"0a474cb8",null,!1,e["a"],void 0);a["default"]=o.exports},aadf:function(t,a,i){var e=i("c86c");a=e(!1),a.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.page[data-v-0a474cb8]{padding:%?20?%}.payinfo[data-v-0a474cb8]{padding:%?30?%;background-color:#fff;border-radius:%?10?%;margin-bottom:%?30?%}.payinfo .flex[data-v-0a474cb8]{display:flex;align-items:center;padding:%?20?% 0;margin-bottom:%?30?%}.payinfo .flex .copy[data-v-0a474cb8]{margin-left:auto}.payinfo .tips[data-v-0a474cb8]{font-size:14px;color:#f56c6c}.pay_ewm_img[data-v-0a474cb8]{width:%?230?%;height:%?230?%}.popArea[data-v-0a474cb8]{padding-top:%?50?%}.popArea .pop_head[data-v-0a474cb8]{padding:0 %?20?%;text-align:center;font-size:%?32?%}.popArea .upload[data-v-0a474cb8]{padding:%?10?% %?20?%}',""]),t.exports=a},f6f7:function(t,a,i){var e=i("aadf");e.__esModule&&(e=e.default),"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=i("967d").default;n("5d14450a",e,!0,{sourceMap:!1,shadowMode:!1})}}]);